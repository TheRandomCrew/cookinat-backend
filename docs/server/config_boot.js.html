<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: config/boot.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: config/boot.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>'use strict';
// const fs = require('fs');
const http = require('http');
const https = require('https');
const logger = require('../util/logger');

module.exports = (app) => {
    /**
     * Create HTTP server.
     */
    const httpPort = normalizePort(process.env.PORT || process.env.PORT_HTTP || 8080);
    http.createServer(app)
        .listen(httpPort)
        .on('error', onError)
        .on('listening', onListening);

    if (process.env.NODE_ENV !== 'production') {
        /**
         * Create HTTPS server.
         */
        const httpsPort = normalizePort(process.env.PORT_HTTPS || 8081);
        const options = {
            // cert: fs.readFileSync('cert/cert.pem'),
            // key: fs.readFileSync('cert/key.pem')
        };
        https.createServer(options, app)
            .listen(httpsPort)
            .on('error', onError)
            .on('listening', onListening);
    }

    /**
     * Normalize a port into a number, string, or false.
     */
    function normalizePort(val) {
        const port = parseInt(val, 10);

        if (isNaN(port)) {
            // named pipe
            return val;
        }

        if (port >= 0) {
            // port number
            return port;
        }

        return false;
    }

    /**
     * Event listener for HTTP server "error" event.
     */
    function onError(error) {
        if (error.syscall !== 'listen') {
            throw error;
        }

        const port = this.cert ? httpsPort : httpPort;

        const bind = typeof port === 'string'
            ? `Pipe ${port}`
            : `Port ${port}`;

        // handle specific listen errors with friendly messages
        switch (error.code) {
            case 'EACCES':
                logger.error(` ${bind} requires elevated privileges`);
                process.exit(1);
                break;
            case 'EADDRINUSE':
                logger.error(`${bind} is already in use`);
                process.exit(1);
                break;
            default:
                throw error;
        }
    }

    /**
     * Event listener for HTTP server "listening" event.
     */
    function onListening() {
        const addr = this.address();
        const type = this.cert ? '(HTTPS)' : '(HTTP)';
        const bind = (typeof addr === 'string'
            ? `pipe ${addr}`
            : `port ${addr.port}`) + ` ${type}`;

        // TODO: Add a link to SWAGGER and to GRAPHQL
        logger.info(`Check API Docs on http://127.0.0.1:8080/cookinat_api_test`);
    }
};</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#allowedOrigins">allowedOrigins</a></li><li><a href="global.html#isProduction">isProduction</a></li><li><a href="global.html#limiter">limiter</a></li><li><a href="global.html#logFormat">logFormat</a></li><li><a href="global.html#max">max</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Sun Sep 01 2019 16:15:05 GMT-0400 (GMT-04:00)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
